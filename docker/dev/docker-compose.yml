---
version: '3'
services:
  psql:
    image: jutonz/homepage-dev-psql:5
    volumes:
    - "../../:/tmp/code"
    - "pgdata:/var/lib/postgresql/data"
  redis:
    image: jutonz/homepage-dev-redis:1
  app:
    image: jutonz/homepage-dev-app:20
    environment:
    - SECRET_KEY_BASE="9Z4EOxi6xe+P7ci7gSQn/Lqt4QIXinGJu+CW4YI0lQYaBzFfJsvLvMDm2B38ETM+"
    - CI
    volumes:
    - "../../:/root"
    - "code:/tmp/app"
    - "node_modules:/root/apps/client/assets/node_modules"
    ports:
    - 4000:4000
    depends_on:
    - psql
    - redis
    links:
    - psql
    - redis
volumes:
  node_modules:
  pgdata:
  code:
